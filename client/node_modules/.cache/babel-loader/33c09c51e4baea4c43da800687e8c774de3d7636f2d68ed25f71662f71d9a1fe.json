{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n\n// const AdminPanel = () => {\n//   const navigate = useNavigate();\n//   const [users, setUsers] = useState([]);\n//   const [notes, setNotes] = useState([]);\n//   const [loading, setLoading] = useState(true);\n\n//   useEffect(() => {\n//     const userRole = localStorage.getItem(\"role\");\n//     const token = localStorage.getItem(\"token\");\n\n//     if (!userRole || userRole !== \"admin\" || !token) {\n//       navigate(\"/login\");\n//       return;\n//     }\n\n//     fetchUsers(token);\n//     fetchNotes(token);\n//   }, [navigate]);\n\n//   const fetchUsers = async (token) => {\n//     try {\n//       const response = await fetch(\"http://localhost:5000/api/users\", {\n//         headers: { Authorization: `Bearer ${token}` },\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(\"Failed to fetch users\");\n//       }\n\n//       const data = await response.json();\n//       setUsers(data);\n//     } catch (error) {\n//       console.error(\"Error fetching users:\", error);\n//     }\n//   };\n\n//   const fetchNotes = async (token) => {\n//     try {\n//       const response = await fetch(\"http://localhost:5000/api/notes\", {\n//         headers: { Authorization: `Bearer ${token}` },\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(\"Failed to fetch notes\");\n//       }\n\n//       const data = await response.json();\n//       setNotes(data);\n//     } catch (error) {\n//       console.error(\"Error fetching notes:\", error);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const changeRole = async (userId) => {\n//     try {\n//       const token = localStorage.getItem(\"token\");\n\n//       const response = await fetch(`http://localhost:5000/api/promote/${userId}`, {\n//         method: \"PUT\",\n//         headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\n//         body: JSON.stringify({ role: \"admin\" }),\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(\"Failed to update role\");\n//       }\n\n//       fetchUsers(token);\n//     } catch (error) {\n//       console.error(\"Failed to update role:\", error);\n//     }\n//   };\n\n//   const deleteUser = async (userId) => {\n//     try {\n//       const token = localStorage.getItem(\"token\");\n\n//       const response = await fetch(`http://localhost:5000/api/delete/${userId}`, {\n//         method: \"DELETE\",\n//         headers: { Authorization: `Bearer ${token}` },\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(\"Failed to delete user\");\n//       }\n\n//       fetchUsers(token);\n//     } catch (error) {\n//       console.error(\"Failed to delete user:\", error);\n//     }\n//   };\n\n//   const deleteNote = async (noteId) => {\n//     try {\n//       const token = localStorage.getItem(\"token\");\n\n//       const response = await fetch(`http://localhost:5000/api/notes/${noteId}`, {\n//         method: \"DELETE\",\n//         headers: { Authorization: `Bearer ${token}` },\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(\"Failed to delete note\");\n//       }\n\n//       fetchNotes(token);\n//     } catch (error) {\n//       console.error(\"Error deleting note:\", error);\n//     }\n//   };\n\n//   if (loading) return <p>Loading...</p>;\n\n//   return (\n//     <div>\n//       <h2>Admin Panel</h2>\n\n//       {/* User Management */}\n//       <h3>User Management</h3>\n//       <table border=\"1\">\n//         <thead>\n//           <tr>\n//             <th>Username</th>\n//             <th>Email</th>\n//             <th>Role</th>\n//             <th>Actions</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {users.map((user) => (\n//             <tr key={user._id}>\n//               <td>{user.username}</td>\n//               <td>{user.email}</td>\n//               <td>{user.role}</td>\n//               <td>\n//                 {user.role !== \"admin\" && (\n//                   <button onClick={() => changeRole(user._id)}>Promote to Admin</button>\n//                 )}\n//                 <button onClick={() => deleteUser(user._id)} style={{ marginLeft: \"10px\" }}>\n//                   Delete\n//                 </button>\n//               </td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n\n//       {/* Notes Management */}\n//       <h3>Notes Management</h3>\n//       <button onClick={() => navigate(\"/admin/add-note\")}>‚ûï Add New Note</button>\n//       <table border=\"1\" style={{ marginTop: \"10px\", width: \"100%\" }}>\n//         <thead>\n//           <tr>\n//             <th>Title</th>\n//             <th>Content</th>\n//             <th>Actions</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {notes.length === 0 ? (\n//             <tr>\n//               <td colSpan=\"3\">No notes available.</td>\n//             </tr>\n//           ) : (\n//             notes.map((note) => (\n//               <tr key={note._id}>\n//                 <td>{note.title}</td>\n//                 <td>{note.content}</td>\n//                 <td>\n//                   <button onClick={() => deleteNote(note._id)} style={{ marginLeft: \"10px\" }}>\n//                     üóëÔ∏è Delete\n//                   </button>\n//                 </td>\n//               </tr>\n//             ))\n//           )}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n// };\n\n// export default AdminPanel;","map":{"version":3,"names":[],"sources":["C:/Users/vaish/OneDrive/Desktop/Notes_world/educational-website/client/src/components/AdminPanel.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// const AdminPanel = () => {\r\n//   const navigate = useNavigate();\r\n//   const [users, setUsers] = useState([]);\r\n//   const [notes, setNotes] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   useEffect(() => {\r\n//     const userRole = localStorage.getItem(\"role\");\r\n//     const token = localStorage.getItem(\"token\");\r\n\r\n//     if (!userRole || userRole !== \"admin\" || !token) {\r\n//       navigate(\"/login\");\r\n//       return;\r\n//     }\r\n\r\n//     fetchUsers(token);\r\n//     fetchNotes(token);\r\n//   }, [navigate]);\r\n\r\n//   const fetchUsers = async (token) => {\r\n//     try {\r\n//       const response = await fetch(\"http://localhost:5000/api/users\", {\r\n//         headers: { Authorization: `Bearer ${token}` },\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(\"Failed to fetch users\");\r\n//       }\r\n\r\n//       const data = await response.json();\r\n//       setUsers(data);\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching users:\", error);\r\n//     }\r\n//   };\r\n\r\n//   const fetchNotes = async (token) => {\r\n//     try {\r\n//       const response = await fetch(\"http://localhost:5000/api/notes\", {\r\n//         headers: { Authorization: `Bearer ${token}` },\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(\"Failed to fetch notes\");\r\n//       }\r\n\r\n//       const data = await response.json();\r\n//       setNotes(data);\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching notes:\", error);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const changeRole = async (userId) => {\r\n//     try {\r\n//       const token = localStorage.getItem(\"token\");\r\n\r\n//       const response = await fetch(`http://localhost:5000/api/promote/${userId}`, {\r\n//         method: \"PUT\",\r\n//         headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n//         body: JSON.stringify({ role: \"admin\" }),\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(\"Failed to update role\");\r\n//       }\r\n\r\n//       fetchUsers(token);\r\n//     } catch (error) {\r\n//       console.error(\"Failed to update role:\", error);\r\n//     }\r\n//   };\r\n\r\n//   const deleteUser = async (userId) => {\r\n//     try {\r\n//       const token = localStorage.getItem(\"token\");\r\n\r\n//       const response = await fetch(`http://localhost:5000/api/delete/${userId}`, {\r\n//         method: \"DELETE\",\r\n//         headers: { Authorization: `Bearer ${token}` },\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(\"Failed to delete user\");\r\n//       }\r\n\r\n//       fetchUsers(token);\r\n//     } catch (error) {\r\n//       console.error(\"Failed to delete user:\", error);\r\n//     }\r\n//   };\r\n\r\n//   const deleteNote = async (noteId) => {\r\n//     try {\r\n//       const token = localStorage.getItem(\"token\");\r\n\r\n//       const response = await fetch(`http://localhost:5000/api/notes/${noteId}`, {\r\n//         method: \"DELETE\",\r\n//         headers: { Authorization: `Bearer ${token}` },\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(\"Failed to delete note\");\r\n//       }\r\n\r\n//       fetchNotes(token);\r\n//     } catch (error) {\r\n//       console.error(\"Error deleting note:\", error);\r\n//     }\r\n//   };\r\n\r\n//   if (loading) return <p>Loading...</p>;\r\n\r\n//   return (\r\n//     <div>\r\n//       <h2>Admin Panel</h2>\r\n\r\n//       {/* User Management */}\r\n//       <h3>User Management</h3>\r\n//       <table border=\"1\">\r\n//         <thead>\r\n//           <tr>\r\n//             <th>Username</th>\r\n//             <th>Email</th>\r\n//             <th>Role</th>\r\n//             <th>Actions</th>\r\n//           </tr>\r\n//         </thead>\r\n//         <tbody>\r\n//           {users.map((user) => (\r\n//             <tr key={user._id}>\r\n//               <td>{user.username}</td>\r\n//               <td>{user.email}</td>\r\n//               <td>{user.role}</td>\r\n//               <td>\r\n//                 {user.role !== \"admin\" && (\r\n//                   <button onClick={() => changeRole(user._id)}>Promote to Admin</button>\r\n//                 )}\r\n//                 <button onClick={() => deleteUser(user._id)} style={{ marginLeft: \"10px\" }}>\r\n//                   Delete\r\n//                 </button>\r\n//               </td>\r\n//             </tr>\r\n//           ))}\r\n//         </tbody>\r\n//       </table>\r\n\r\n//       {/* Notes Management */}\r\n//       <h3>Notes Management</h3>\r\n//       <button onClick={() => navigate(\"/admin/add-note\")}>‚ûï Add New Note</button>\r\n//       <table border=\"1\" style={{ marginTop: \"10px\", width: \"100%\" }}>\r\n//         <thead>\r\n//           <tr>\r\n//             <th>Title</th>\r\n//             <th>Content</th>\r\n//             <th>Actions</th>\r\n//           </tr>\r\n//         </thead>\r\n//         <tbody>\r\n//           {notes.length === 0 ? (\r\n//             <tr>\r\n//               <td colSpan=\"3\">No notes available.</td>\r\n//             </tr>\r\n//           ) : (\r\n//             notes.map((note) => (\r\n//               <tr key={note._id}>\r\n//                 <td>{note.title}</td>\r\n//                 <td>{note.content}</td>\r\n//                 <td>\r\n//                   <button onClick={() => deleteNote(note._id)} style={{ marginLeft: \"10px\" }}>\r\n//                     üóëÔ∏è Delete\r\n//                   </button>\r\n//                 </td>\r\n//               </tr>\r\n//             ))\r\n//           )}\r\n//         </tbody>\r\n//       </table>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default AdminPanel;\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}