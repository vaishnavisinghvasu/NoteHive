{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.testElement = testElement;\nexports.getElements = getElements;\nexports.getElementById = getElementById;\nexports.getElementsByTagName = getElementsByTagName;\nexports.getElementsByClassName = getElementsByClassName;\nexports.getElementsByTagType = getElementsByTagType;\nvar domhandler_1 = require(\"domhandler\");\nvar querying_js_1 = require(\"./querying.js\");\n/**\n * A map of functions to check nodes against.\n */\nvar Checks = {\n  tag_name: function (name) {\n    if (typeof name === \"function\") {\n      return function (elem) {\n        return (0, domhandler_1.isTag)(elem) && name(elem.name);\n      };\n    } else if (name === \"*\") {\n      return domhandler_1.isTag;\n    }\n    return function (elem) {\n      return (0, domhandler_1.isTag)(elem) && elem.name === name;\n    };\n  },\n  tag_type: function (type) {\n    if (typeof type === \"function\") {\n      return function (elem) {\n        return type(elem.type);\n      };\n    }\n    return function (elem) {\n      return elem.type === type;\n    };\n  },\n  tag_contains: function (data) {\n    if (typeof data === \"function\") {\n      return function (elem) {\n        return (0, domhandler_1.isText)(elem) && data(elem.data);\n      };\n    }\n    return function (elem) {\n      return (0, domhandler_1.isText)(elem) && elem.data === data;\n    };\n  }\n};\n/**\n * Returns a function to check whether a node has an attribute with a particular\n * value.\n *\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a\n *   particular value.\n */\nfunction getAttribCheck(attrib, value) {\n  if (typeof value === \"function\") {\n    return function (elem) {\n      return (0, domhandler_1.isTag)(elem) && value(elem.attribs[attrib]);\n    };\n  }\n  return function (elem) {\n    return (0, domhandler_1.isTag)(elem) && elem.attribs[attrib] === value;\n  };\n}\n/**\n * Returns a function that returns `true` if either of the input functions\n * returns `true` for a node.\n *\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either of the input\n *   functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n  return function (elem) {\n    return a(elem) || b(elem);\n  };\n}\n/**\n * Returns a function that executes all checks in `options` and returns `true`\n * if any of them match a node.\n *\n * @param options An object describing nodes to look for.\n * @returns A function that executes all checks in `options` and returns `true`\n *   if any of them match a node.\n */\nfunction compileTest(options) {\n  var funcs = Object.keys(options).map(function (key) {\n    var value = options[key];\n    return Object.prototype.hasOwnProperty.call(Checks, key) ? Checks[key](value) : getAttribCheck(key, value);\n  });\n  return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * Checks whether a node matches the description in `options`.\n *\n * @category Legacy Query Functions\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n  var test = compileTest(options);\n  return test ? test(node) : true;\n}\n/**\n * Returns all nodes that match `options`.\n *\n * @category Legacy Query Functions\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  var test = compileTest(options);\n  return test ? (0, querying_js_1.filter)(test, nodes, recurse, limit) : [];\n}\n/**\n * Returns the node with the supplied ID.\n *\n * @category Legacy Query Functions\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n  if (recurse === void 0) {\n    recurse = true;\n  }\n  if (!Array.isArray(nodes)) nodes = [nodes];\n  return (0, querying_js_1.findOne)(getAttribCheck(\"id\", id), nodes, recurse);\n}\n/**\n * Returns all nodes with the supplied `tagName`.\n *\n * @category Legacy Query Functions\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n  if (recurse === void 0) {\n    recurse = true;\n  }\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  return (0, querying_js_1.filter)(Checks[\"tag_name\"](tagName), nodes, recurse, limit);\n}\n/**\n * Returns all nodes with the supplied `className`.\n *\n * @category Legacy Query Functions\n * @param className Class name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `className`.\n */\nfunction getElementsByClassName(className, nodes, recurse, limit) {\n  if (recurse === void 0) {\n    recurse = true;\n  }\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  return (0, querying_js_1.filter)(getAttribCheck(\"class\", className), nodes, recurse, limit);\n}\n/**\n * Returns all nodes with the supplied `type`.\n *\n * @category Legacy Query Functions\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n  if (recurse === void 0) {\n    recurse = true;\n  }\n  if (limit === void 0) {\n    limit = Infinity;\n  }\n  return (0, querying_js_1.filter)(Checks[\"tag_type\"](type), nodes, recurse, limit);\n}","map":{"version":3,"names":["exports","testElement","getElements","getElementById","getElementsByTagName","getElementsByClassName","getElementsByTagType","domhandler_1","require","querying_js_1","Checks","tag_name","name","elem","isTag","tag_type","type","tag_contains","data","isText","getAttribCheck","attrib","value","attribs","combineFuncs","a","b","compileTest","options","funcs","Object","keys","map","key","prototype","hasOwnProperty","call","length","reduce","node","test","nodes","recurse","limit","Infinity","filter","id","Array","isArray","findOne","tagName","className"],"sources":["https://raw.githubusercontent.com/fb55/domutils/0ab8bcf1ecfc70dfc93291a4cb2496578ac25e9c/src/legacy.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}